@model FormsViewModel

@{
    ViewBag.Title = "Crear Formulario";
}

<div class="row">
    <div class="col-sm-12">
        <hgroup class="title">
            <h1>@ViewBag.Title</h1>
        </hgroup>
        <div class="well">
            @using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(true)
                @Html.HiddenFor(m => m.ESTANDARIZADO)
                <fieldset>
                    <legend>Crear un nuevo formulario</legend>
                    <div class="row">
                        <div class="form-group col-sm-6 col-xs-12">
                            @Html.CLabelFor(m => m.NOMBRE)
                            @Html.CTextBoxFor(m => m.NOMBRE)
                            @Html.CValidationMessageFor(m => m.NOMBRE)
                        </div>
                        <div class="form-group col-sm-6 col-xs-12">
                            @Html.CLabelFor(m => m.PROCEDIMIENTO)
                            @Html.CTextBoxFor(m => m.PROCEDIMIENTO, new { @class = "upperCase", maxlength = "200" })
                            @Html.CValidationMessageFor(m => m.PROCEDIMIENTO)
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-sm-6 col-xs-12">
                            @Html.CLabelFor(m => m.DESCRIPCION)
                            @Html.CTextAreaFor(m => m.DESCRIPCION, new { rows = 4 })
                            @Html.CValidationMessageFor(m => m.DESCRIPCION)
                        </div>
                        <div class="form-group col-sm-6 col-xs-12">
                            <label class="control-label">Parametros del procedimiento</label>
                            @Html.CTextArea("Parameters", new { @rows = 4, @readonly = "true", @class = "control-readonly" })
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-sm-6 col-xs-12">
                            @Html.CLabelFor(m => m.HABILITADO, new { @class = "w100" })
                            @Html.CheckBoxFor(m => m.HABILITADO, new { @class = "switchInput" })
                        </div>
                    </div>

                    <h4 class="section-subtitle ">Par&aacute;metros</h4>
                    <div class="row">
                        <div class="col-sm-12">
                                <input type="button" data-target="#createParameterModal" class="btn btn-success  fr mb10 addParameter" value="Agregar" />
                        </div>
                        @{ var pModel = new ParameterViewModel(); }
                        <div class="table-responsive">
                            @Html.Hidden("rowCount", 0, new { @class = "rowCount" })
                            @Html.Hidden("GetParamsDataUrl", Url.Action("GetParametersInfo", "Forms"))
                            <div class="col-sm-12">
                                <table class="table table-bordered table-striped table-hover parametersTable">
                                    <thead>
                                        <tr class="success">
                                            <th>@Html.DisplayNameFor(m => pModel.NOMBRE)</th>
                                            <th>@Html.DisplayNameFor(m => pModel.PARAMETRO)</th>
                                            <th>@Html.DisplayNameFor(m => pModel.REQUERIDO)</th>
                                            <th>@Html.DisplayNameFor(m => pModel.TIPO)</th>
                                            <th>Opciones</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <label>&nbsp;</label><br/>
                    </div>

                    <div class="row form-group col-sm-12">
                        <input type="submit" class="btn btn-primary ml2" value="Guardar" />
                        @Html.ActionLink("Cancelar", "Index", null, new { @class = "btn btn-default" })
                    </div>
                </fieldset>
            }
        </div>
    </div>
</div>

<div class="parameterModal">
    @Html.Partial("_ParameterPartial", new ParameterViewModel())
</div>

<div class="editParameterModal">
    @Html.Partial("_ParameterPartial", new ParameterViewModel())
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $.fn.CreateForm();
        });
    </script>
}
